{% extends "inverso_sa/dashboard.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'inverso_sa/css/recarga.css' %}">
{% endblock %}

{% block contenido %}
<div class="container">

    <h2>ðŸ’³ Recargar saldo</h2>

    <!-- BOTONES -->
    <div style="display:flex; gap:10px; margin-bottom:20px; flex-wrap:wrap;">

        <a href="{% url 'inicio' %}" class="btn-cta">
            â¬… Regresar
        </a>

        <a href="{% url 'mis_recargas' %}" class="btn-cta">
            ðŸ“„ Historial de recargas
        </a>

    </div>

    <!-- MENSAJES -->
    {% for message in messages %}
        <p style="color:red">{{ message }}</p>
    {% endfor %}

    <!-- ===============================
        TARJETA DATOS BANCARIOS
    =============================== -->
    <div class="card-bg">

        <p>
            <span><strong>Banco:</strong> {{ cuenta.banco }}</span>
            <button type="button" onclick="copiar('{{ cuenta.banco }}')">
                Copiar
            </button>
        </p>

        <p>
            <span><strong>Destinatario:</strong> {{ cuenta.destinatario }}</span>
            <button type="button" onclick="copiar('{{ cuenta.destinatario }}')">
                Copiar
            </button>
        </p>

        <p>
            <span><strong>NÂ° Cuenta:</strong> {{ cuenta.numero_cuenta }}</span>
            <button type="button" onclick="copiar('{{ cuenta.numero_cuenta }}')">
                Copiar
            </button>
        </p>

    </div>

    <!-- ===============================
        FORMULARIO
    =============================== -->
    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}

        <label>Monto</label>
        <input type="number" name="monto" id="monto" required>

        <!-- montos rÃ¡pidos -->
        <div class="quick-amounts">
            <button type="button" onclick="setMonto(400)">C$400</button>
            <button type="button" onclick="setMonto(600)">C$600</button>
            <button type="button" onclick="setMonto(1000)">C$1000</button>
            <button type="button" onclick="setMonto(3000)">C$3000</button>
            <button type="button" onclick="setMonto(5000)">C$5000</button>
            <button type="button" onclick="setMonto(10000)">C$10000</button>
            <button type="button" onclick="setMonto(50000)">C$50000</button>
            <button type="button" onclick="setMonto(100000)">C$100000</button>
        </div>

        <label>NÂ° Referencia (del comprobante)</label>
        <input type="text" name="referencia" required>

        <label>Voucher</label>
        <input type="file" name="voucher" required>

        <button type="submit" class="btn-cta">
            Enviar recarga
        </button>

        <!-- ===============================
            AVISOS IMPORTANTES
        =============================== -->
        <div style="
            margin-top:20px;
            background:#fff6e5;
            border:1px solid #f1c40f;
            padding:15px;
            border-radius:10px;
            font-size:14px;
            color:#5a4a00;
        ">

            <strong>âš  Importante:</strong>
            <ul style="margin-top:10px; padding-left:18px;">
                <li>El monto mÃ­nimo para recargar es de <strong>C$400</strong>.</li>
                <li>Si el <strong>nÃºmero de referencia</strong> no coincide con el del comprobante, la recarga no serÃ¡ aplicada.</li>
                <li>Si el voucher <strong>no muestra claramente el nÃºmero de referencia</strong>, la recarga serÃ¡ rechazada.</li>
                <li>Si el <strong>monto del voucher no coincide</strong> con el monto ingresado, la recarga no serÃ¡ vÃ¡lida.</li>
                <li>Si el <strong>titular del comprobante no coincide</strong> con la cuenta indicada, la recarga no serÃ¡ procesada.</li>
                <li>Los comprobantes alterados, incompletos o ilegibles serÃ¡n automÃ¡ticamente rechazados.</li>
            </ul>

        </div>

    </form>

</div>

<!-- ===============================
    JS COPIAR
================================ -->
<script>
function copiar(texto) {
    navigator.clipboard.writeText(texto);
    alert("Copiado correctamente âœ…");
}

function setMonto(valor) {
    document.getElementById("monto").value = valor;
}
</script>

{% endblock %}
